main: cli
name: Math Calculator with Tests
version: 1.0.0
description: Demonstrates Phlow testing capabilities
author: Phlow Team

modules:
  - module: cli
    version: latest
    with:
      additional_args: false
      args:
        - name: total
          help: Initial total value
          index: 1
          type: number
          required: true

# Test cases for the phlow
tests: 
  - main:
      total: 2
    payload: 10
    assert_eq: "Total is 20"
  - main:
      total: 3
    payload: 5
    assert: !phs payload == "Total is 15"
  - main:
      total: 0
    payload: 42
    assert_eq: "Total is 0"

steps:
  - payload: !phs main.total * payload 
  - payload: !phs `Total is ${payload}`
